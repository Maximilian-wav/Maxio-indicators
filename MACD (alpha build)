// MAX MACD indicator.
//The purpose of this build is to get a working version of a MACD indicator that can then be utilized for a cross over trading strategy.
//double function is used

//declare Inputs

Inputs:
Fastlength(12),
Slowlength (26),
MACDLength(9),
AlertIfCrossUP(1),
AlertifCrossDWN(1),
MACDDiff_UP_Color( UpColorDefault ),
MACDDiff_DWN_Color(DownColorDefault);

//Declare Variables

Variables:
intrabarpersist bool InAChart( false ),
MaxMACD(0),
MACDAVG(0),
MACDDiff(0),
Crossbarsago(0);


//Calculate and Assign Values

MaxMACD = MACD(close, fastlength, slowlength);
MACDAVG = XAverage( MaxMACD, MACDlength);
MACDDiff = MaxMACD - MACDAVG;

if ( MACDDiff > 0 and MACDDiff[1] <= 0 ) or ( MACDDiff < 0 and MACDDiff[1] >= 0 )
 then
	CrossBarsAgo = 0
else
	CrossBarsAgo += 1;
	
//plot

Plot1( MaxMACD, !( "MACD" ) );
Plot2( MACDAvg, !( "MACDAvg" ) );
Plot3( MACDDiff, !( "MACDDiff" ));
Plot4( 0, !( "ZeroLine" ) );

if InAChart = false then
	Plot5( CrossBarsAgo, !( "CrossBarsAgo" ));
	
